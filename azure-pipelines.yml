trigger:
  branches:
    include:
      - main

pool:
  vmImage: ubuntu-latest

variables:
  GITHUB_TOKEN: $(Token)  # Token do GitHub (secreto no Azure)
  GITHUB_USER: NichollasLima
  GITHUB_REPO: AllThingsServeTheTower

steps:
  - checkout: self  # Azure jÃ¡ clona o repositÃ³rio automaticamente

  - script: |
      git config --global user.name "Azure Mirror"
      git config --global user.email "azure@mirror.dev"

      echo "ðŸ“¡ Remotes configurados:"
      git remote -v

      echo "âž• Adicionando GitHub como remote..."
      git remote add github https://$(GITHUB_USER):$(GITHUB_TOKEN)@github.com/$(GITHUB_USER)/$(GITHUB_REPO).git

      echo "ðŸš€ Realizando push forÃ§ado para main no GitHub..."
      git push github main --force
    displayName: 'Mirror para GitHub'
